---
   layout: default
　　title: reflow & repaint
---
## 浏览器的重排与重绘
- 浏览器的解析过程
（以下部分来自handawei－javaeye的blog）

  Web页面运行在各种各样的浏览器当中，浏览器载入、渲染页面的速度直接影响着用户体验
  简单地说，页面渲染就是浏览器将html代码根据CSS定义的规则显示在浏览器窗口中的这个过程。先来大致了解一下浏览器都是怎么干活的：

  1. 用户输入网址（假设是个html页面，并且是第一次访问），浏览器向服务器发出请求，服务器返回html文件；
  2. 浏览器开始载入html代码，发现<head>标签内有一个<link>标签引用外部CSS文件；
  3. 浏览器又发出CSS文件的请求，服务器返回这个CSS文件；
  4. 浏览器继续载入html中<body>部分的代码，并且CSS文件已经拿到手了，可以开始渲染页面了；
  5. 浏览器在代码中发现一个<img>标签引用了一张图片，向服务器发出请求。此时浏览器不会等到图片下载完，而是继续渲染后面的代码；
  6. 服务器返回图片文件，由于图片占用了一定面积，影响了后面段落的排布，因此浏览器需要回过头来重新渲染这部分代码；
  7. 浏览器发现了一个包含一行Javascript代码的<script>标签，赶快运行它；
  8. Javascript脚本执行了这条语句，它命令浏览器隐藏掉代码中的某个<div> （style.display=”none”）。杯具啊，突然就少了这么一个元素，浏览器不得不重新渲染这部分代码；
  9. 终于等到了</html>的到来，浏览器泪流满面……
  10. 等等，还没完，用户点了一下界面中的“换肤”按钮，Javascript让浏览器换了一下<link>标签的CSS路径；
  11. 浏览器召集了在座的各位<div><span><ul><li>们，“大伙儿收拾收拾行李，咱得重新来过……”，浏览器向服务器请
  求了新的CSS文件，重新渲染页面。 
- 重排 reflow

当浏览器中DOM结构或布局改变时，会引发浏览器的重绘，比如页面上某些元素的占位面积、定位方式、边距等属性的变化，都会引起它内部、周围甚至整个页面的重新渲染

![reflow](/lib/blog-imgs/20160104-reflow.jpg)

- 重绘 repaint

当页面中元素改变，但没有影响其布局，定位（即不影响页面DOM结构）时，会引发浏览器重绘，比如改变某个元素的背景色、文字颜色、边框颜色等等不影响它周围或内部布局的属性

![repaint](/lib/blog-imgs/20160104-repaint.jpg)

___